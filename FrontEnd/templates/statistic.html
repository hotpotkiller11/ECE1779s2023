<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Statistics</title>

        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/style.css') }}" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <script>
            var hit_xy = {{ hit_xy|tojson }};
            var miss_xy = {{ miss_xy|tojson }};
            var size_xy = {{ size_xy|tojson }};
            var count_xy = {{ count_xy|tojson }};
            var req_xy = {{ req_xy|tojson }}
        </script>
    </head>
    <body>
        {% include "navibar.html" %}
        <div class="center">
            <div class="text_box">
                <canvas id="chart_size" style="width:100%;max-width:700px"></canvas>
                <canvas id="chart_count" style="width:100%;max-width:700px"></canvas>
                <canvas id="chart_hit_miss" style="width:100%;max-width:700px"></canvas>
                <canvas id="chart_req" style="width:100%;max-width:700px"></canvas>
            </div> 
        </div>
        <script>
            new Chart("chart_size", {
                        type: "scatter",
                        data: {
                            datasets: [{
                                label: 'Memory size',
                                pointRadius: 1,
                                pointBackgroundColor: "rgb(0,0,255)",
                                data: size_xy,
                                showLine: true,
                                fill: false,
                                borderColor: 'rgb(0,0,255)'
                            }]
                        }, 
                        options: {
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                yAxes: [{
                                    ticks: {
                                    beginAtZero:true
                                    }
                                }]
                            }
                        }
            });
            new Chart("chart_count", {
                        type: "scatter",
                        data: {
                            datasets: [{
                                label: 'Figure count in cache',
                                pointRadius: 1,
                                pointBackgroundColor: "rgb(0,0,255)",
                                data: count_xy,
                                showLine: true,
                                fill: false,
                                borderColor: 'rgb(0,0,255)'
                            }]
                        }, 
                        options: {
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                yAxes: [{
                                    ticks: {
                                    beginAtZero:true
                                    }
                                }]
                            }
                        }
            });
            new Chart("chart_hit_miss", {
                        type: "scatter",
                        data: {
                            datasets: [{
                                label: 'Hit rate',
                                pointRadius: 1,
                                pointBackgroundColor: "rgb(0,0,255)",
                                data: hit_xy,
                                showLine: true,
                                fill: false,
                                borderColor: 'rgb(0,0,255)'
                            }, {
                                label: 'Miss rate',
                                pointRadius: 1,
                                pointBackgroundColor: "rgb(255,0,0)",
                                data: miss_xy,
                                showLine: true,
                                fill: false,
                                borderColor: 'rgb(255,0,0)'
                            }]
                        }, 
                        options: {
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                yAxes: [{
                                    ticks: {
                                    beginAtZero:true
                                    }
                                }]
                            }
                        }
            });
            new Chart("chart_req", {
                        type: "scatter",
                        data: {
                            datasets: [{
                                label: 'Request count',
                                pointRadius: 1,
                                pointBackgroundColor: "rgb(0,0,255)",
                                data: req_xy,
                                showLine: true,
                                fill: false,
                                borderColor: 'rgb(0,0,255)'
                            }]
                        }, 
                        options: {
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                yAxes: [{
                                    ticks: {
                                    beginAtZero:true
                                    }
                                }]
                            }
                        }
            });
        </script>
    </body>
</html>